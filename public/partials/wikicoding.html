<link rel="stylesheet" href="css/homepage.css">
<script src="js/bootstrap3-typeahead.js"></script>
<script src="js/bootstrap-tagsinput.js"></script>
<script src="js/jquery-ui.min.js"></script>
 <div class="panel panel-success">

    <div class="panel-heading">
      Click the start button get start
    <div>
 <div class="panel-body">
 <div class="row">
 <div class="col col-md-6">
 <button class="btn btn-primary" id="wiki-start" data-status="start"> <i class="fa fa-clock-o" aria-hidden="true" style="padding:2px"></i>
 <strong>START</strong></button>
 </div>
<div class="col col-md-offset-2 col-md-2">
 <button class="btn btn-secondary" id="wiki-next"> <i class="fa fa-step-forward" aria-hidden="true" style="padding:2px"></i>
 <strong>NEXT</strong></button>
 </div>
</div>
</div>
<div id="content">
</div>
</div>
</div>
 
<script type="text/javascript">
	$(function(){
		$("#wiki-start").on("click",function(){
			  /*$.ajax({
                method:"GET",
                url:"/wikitemplate",
                success:function(html)
                {
                 
                  $("#content").html(html);
                }
              });*/
        //now query the wiki object and see what is going to happen.
        var numberOfRole=0;
        $("#content").html("");
        $.ajax({
                method:"GET",
                url:"/wikirolecount",
                success:function(data)
                {
                  var ar=data[0].wiki_roles[0].en;
                  numberOfRole=ar.length;
                  console.log("number of wiki roles for this wiki entity "+numberOfRole);                 
                  //ok now need to make multiple ajax call based on how many roles there are. each ajax call will load in a card
                  var element=ar[0];
                  for(i=0;i<numberOfRole;i++)
                  {
                    //console.log(i);
                   // var privatei=i;
                    $.ajax({
                      method:"POST",
                      url:"/wikiloadcard",
                      //this i is to load ith role from the result
                      data:{"para":i},
                      success:function(data)
                      {
                        //console.log(data);
                        //this appened is going to append a card to each role this person
                        $("#content").append(data);
                      }
                    });
                  }
                }
              });



		});
	})  	
</script>
